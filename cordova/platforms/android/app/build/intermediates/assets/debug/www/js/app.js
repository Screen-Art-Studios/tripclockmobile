webpackJsonp([10],[,,,,,,,,,,,function(t,e,o){"use strict";function n(t){o(43)}Object.defineProperty(e,"__esModule",{value:!0});var i=o(12),a=o(44),r=o(3),s=n,d=r(i.a,a.a,!1,s,"data-v-66db01b4",null);e.default=d.exports},function(t,e,o){"use strict";e.a={name:"navbar",props:["logged","user"],data:function(){return{toggled:!1,isToggled:!1,first:!0}},methods:{navToggle:function(){window.innerWidth<700?!1===this.toggled?(this.toggled=!0,this.isToggled=!0,this.first=!1):!0===this.toggled&&(this.toggled=!1,this.isToggled=!1):this.$router.push("/")}},computed:{nvLogic:function(){return{nv:!0,navButtonAnimation:this.isToggled,navButtonAnimationExit:!this.isToggled&&!this.first}},navpaneLogic:function(){return{navpane:this.first,navpaneAnimation:this.isToggled,navpaneAnimationExit:!this.isToggled&&!this.first}}}}},function(t,e,o){"use strict";var n=o(11),i=o(14),a=o.n(i);e.a={name:"app",components:{navbar:n.default},created:function(){var t=this;t.user.token=localStorage.getItem("token"),t.user.id=localStorage.getItem("userId"),t.user.companyId=localStorage.getItem("companyId"),t.user.admin=Boolean(localStorage.getItem("admin")),null!==t.user.token&&(t.logged=!0,a.a.get("http://54.186.69.46:81/users/"+t.user.id,{headers:{Authorization:"JWT "+t.user.token}}).then(function(e){t.lastClockType=e.data.lastClockType,t.onDeviceReady()}).catch(function(t){console.log(t)}))},data:function(){return{modal:"",prettyMessage:"",logged:!1,lastClockType:"",user:{id:"",token:"",companyId:"",admin:!1},distance:0,latitude:"",longitude:"",firstStarted:!0,tripStarted:!1,coordinates:[0,0],pastCoordinates:[0,0],time:"",trip:{userId:"",distance:0,start:{startCoordinates:[0,0],latitude:"",longitude:"",day:0,month:0,hour:0,minute:0,second:0},end:{endCoordinates:[0,0],latitude:"",longitude:"",day:0,month:0,hour:0,minute:0,second:0}},mapboxToken:"pk.eyJ1IjoiZ3JhcGV0b2FzdCIsImEiOiJjajhkeHR5YzEwdXp4MnpwbWhqYzI4ejh0In0.JzUlf5asD6yOa5XvjUF5Ag"}},methods:{prettyModal:function(t){var e=this;e.prettyMessage=t,e.modal="pretty"},log:function(t){var e=this;null!==t.token?(e.user.token=t.token,e.user.id=t.id,e.user.admin=t.admin,e.user.companyId=t.companyId,e.logged=!0,e.$router.push("/")):e.logged=!1},register:function(t){var e=this;null!==t.token?(e.user.token=t.data.token,e.user.id=t.data.id,e.user.admin=t.data.admin,e.logged=!0,e.$router.push("/")):e.logged=!1},logOut:function(){var t=this;t.user.token="",t.user.id="",t.user.admin=!1,t.logged=!1,localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("admin"),t.$router.push("/login")},mileageLogic:function(){var t=this;t.prettyModal("logic"),!0===t.firstStarted?navigator.geolocation.getCurrentPosition(t.locationSuccess,t.locationFail):"out"!==t.lastClockType&&(t.pastCoordinates=t.coordinates,navigator.geolocation.getCurrentPosition(t.mileageLocationSuccess,t.locationFail))},locationSuccess:function(t){var e=this;e.coordinates=[t.coords.longitude.toPrecision(6),t.coords.latitude.toPrecision(5)],e.pastCoordinates=e.coordinates,e.firstStarted=!1},mileageLocationSuccess:function(t){var e=this;e.coordinates=[t.coords.longitude.toPrecision(6),t.coords.latitude.toPrecision(5)],!1===e.tripStarted?e.pastCoordinates[0]===e.coordinates[0]&&e.pastCoordinates[1]===e.coordinates[1]||(e.trip.start.startCoordinates=e.pastCoordinates,e.time=new Date,e.trip.start.month=e.time.getMonth(),e.trip.start.day=e.time.getDay(),e.trip.start.hour=e.time.getHours(),e.trip.start.minute=e.time.getMinutes(),e.trip.start.second=e.time.getSeconds(),e.trip.start.latitude=e.pastCoordinates[0],e.trip.start.longitude=e.pastCoordinates[1],e.tripStarted=!0,e.prettyModal("trip started")):!0===e.tripStarted&&e.pastCoordinates[0]===e.coordinates[0]&&e.pastCoordinates[1]===e.coordinates[1]&&(e.trip.end.endCoordinates=e.coordinates,e.time=new Date,e.trip.end.month=e.time.getMonth(),e.trip.end.day=e.time.getDay(),e.trip.end.hour=e.time.getHours(),e.trip.end.minute=e.time.getMinutes(),e.trip.end.second=e.time.getSeconds(),e.trip.end.latitude=e.coordinates[0],e.trip.end.longitude=e.coordinates[1],e.trip.userId=e.user.id,e.getDirections(),e.postTrip(),e.prettyModal("trip ended"),e.tripStarted=!1)},locationFail:function(){this.prettyModal("It seems we cant find you, please reload the page and try again."),this.locationError=!0},getDirections:function(){var t=this;a.a.get("https://api.mapbox.com/directions/v5/mapbox/driving/"+t.trip.start.startCoordinates+";"+t.trip.end.endCoordinates+"?geometries=geojson&access_token="+t.mapboxToken).then(function(e){t.trip.distance=e.data.routes[0].distance}).catch(function(t){console.log(t)})},postTrip:function(){var t=this;a.a.post("http://54.186.69.46:81/trips",{userId:t.user.id,start:{latitude:t.trip.start.latitude,longitude:t.trip.start.longitude,month:t.trip.start.month,day:t.trip.start.day,hour:t.trip.start.hour,minute:t.trip.start.minute,second:t.trip.start.second},end:{latitude:t.trip.end.latitude,longitude:t.trip.end.longitude,month:t.trip.end.month,day:t.trip.end.day,hour:t.trip.end.hour,minute:t.trip.end.minute,second:t.trip.end.second},distance:t.trip.distance}).then(function(e){t.prettyModal("trip Success!!")}).catch(function(t){console.log(t)})},onDeviceReady:function(){var t=this;try{cordova.plugins.backgroundMode.enable()}catch(e){t.prettyModal("Failed to enable Background Mode, please review settings and restart app.")}t.tripLogic()},tripLogic:function(){var t=this;setInterval(function(){t.mileageLogic()},3e4)}}}},,,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(4),i=o(21),a=o(22),r=o(47);o.n(r);o(17),window.mapboxgl=o(15),n.a.config.productionTip=!1,n.a.use(i.a),o(45),i.a.start(function(){new n.a({el:"#q-app",router:a.a,render:function(t){return t(o(49).default)}})})},function(t,e){},,,,,function(t,e,o){"use strict";function n(t){return function(){return o(24)("./"+t+".vue")}}var i=o(4),a=o(23);i.a.use(a.a),e.a=new a.a({mode:"hash",scrollBehavior:function(){return{y:0}},routes:[{path:"/",component:n("TimeCrunch")},{path:"/Login",component:n("Login")},{path:"/Register",component:n("Register")},{path:"/Account",component:n("Account")},{path:"/elements/Mapbox",component:n("Mapbox")},{path:"*",component:n("Error404")}]})},,function(t,e,o){function n(t){var e=i[t];return e?Promise.all(e.slice(1).map(o.e)).then(function(){return o(e[0])}):Promise.reject(new Error("Cannot find module '"+t+"'."))}var i={"./Account.vue":[56,0],"./Error404.vue":[57,8],"./Landing.vue":[58,7],"./Login.vue":[59,6],"./Register.vue":[60,5],"./TimeCrunch.vue":[61,2],"./elements/Analytics.vue":[54,1],"./elements/Mapbox.vue":[62,4],"./elements/Marker.vue":[63,3],"./elements/Navbar.vue":[11]};n.keys=function(){return Object.keys(i)},n.id=24,t.exports=n},,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"main"},[o("div",{staticClass:"navbar"},[o("div",{staticClass:"logo",on:{click:function(e){t.$router.push("/")}}}),t._v(" "),o("div",{class:t.nvLogic,on:{click:t.navToggle}}),t._v(" "),o("div",{class:t.navpaneLogic},[t.logged?o("button",{staticClass:"Home",on:{click:function(e){t.navToggle(),t.$router.push("/")}}},[t._v("Home")]):t._e(),t._v(" "),t.logged?t._e():o("button",{staticClass:"Login",on:{click:function(e){t.navToggle(),t.$router.push("/Login")}}},[t._v("Login")]),t._v(" "),t.logged?t._e():o("button",{staticClass:"Reg",on:{click:function(e){t.navToggle(),t.$router.push("/Register")}}},[t._v("Register")]),t._v(" "),t.logged?o("button",{staticClass:"Account",on:{click:function(e){t.navToggle(),t.$router.push("/Account")}}},[t._v("Account")]):t._e(),t._v(" "),t.logged?o("button",{staticClass:"Logout",on:{click:function(e){t.navToggle(),t.$emit("logout")}}},[t._v("Logout")]):t._e()])])])},i=[],a={render:n,staticRenderFns:i};e.a=a},,function(t,e){},,function(t,e){},function(t,e,o){"use strict";function n(t){o(50)}Object.defineProperty(e,"__esModule",{value:!0});var i=o(13),a=o(51),r=o(3),s=n,d=r(i.a,a.a,!1,s,"data-v-6992f3b0",null);e.default=d.exports},function(t,e){},function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"q-app"}},[o("navbar",{attrs:{logged:t.logged,user:t.user},on:{logout:t.logOut}}),t._v(" "),"pretty"===t.modal?o("div",{staticClass:"prettyModal"},[o("h2",[t._v(t._s(t.prettyMessage))]),t._v(" "),o("button",{staticClass:"prettyBack",on:{click:function(e){t.modal=""}}},[t._v("Back")])]):t._e(),t._v(" "),o("router-view",{attrs:{logged:t.logged,user:t.user},on:{login:t.log,register:t.register}})],1)},i=[],a={render:n,staticRenderFns:i};e.a=a}],[16]);